**Execution Settings**

Most of the experiment settings are passed to MiniNetFED through a .yaml file that is sent as an argument when executing the program.

```bash
sudo python3 main.py config.yaml
```

You can edit the provided example file or create your own.

The configuration file structure is as follows:

```yml
general:
  experiment:
    network:
      server:
        clients:
```

## General

```yml
general:
  n_available_cpu: int
  broker_image: string
  experiments_folder: string
```

### _n_available_cpu_

Number of logical cores available on the computer. Used as a base for calculating processor power distribution between containers.

### _broker_image_

Image to be used to instantiate a Docker container for the MQTT broker. It is recommended to use the standard image provided with MiniNetFED, but you can create your own custom broker by modifying this option.

### _experiments_folder_

Folder where experiment folders are created.

## Experiment

```yml
experiment:
  new_experiment: (true or false)
  experiment_name: (string)
  trainer_mode: (string)
  max_n_rounds: (int)
  stop_accuracy: (float, 0 <= n <= 1)
  min_trainers: (int)
```

### _new_experiment_

Specifies whether you want MiniNetFED to automatically create a new folder for the experiment or continue filling in an existing experiment's folder.

**True**

Searches or creates a directory for the experiment in the following format:

```bash
(experiments_folder)/YYYY_MM_DD_(experiment_name)
```

**False**

Searches for the experiment folder by name. If the folder does not exist, MiniNetFED will display an error message.

```bash
(experiments_folder)/(experiment_name)
```

### _experiment_name_

Experiment name to reference the folder where the results of each experiment are stored.

### _trainer_mode_

This option is passed directly to the Trainer. It selects predefined modes for dividing data and operating the Trainer.

### _max_n_rounds_

Option passed to the server to define the maximum number of rounds of communication between the server and client, setting a stopping condition.

### _stop_accuracy_

Option that defines a stopping condition based on the average accuracy of the model generated by combining models from each trainer.

### _min_trainers_

Specifies the minimum number of clients connected before initializing training.

### Note

The first reached stopping condition will be responsible for interrupting execution. The cause of the stop will be recorded in the training log.

## Network

```yml
network_monitor_script: string
network_monitor_image: string
network_components: int
```

### _network_monitor_script_

Address of the network monitor script. Use the standard script provided as an example or modify it to create a custom monitor.

### _network_monitor_image_

Image used in the Docker container for the network monitor. Use the standard image provided as an example or modify it to create a custom monitor.

### _network_components_

Number of switches in the network for creating complex network topologies. In simple networks, leave the value at "1".

## Server

```yml
memory: (int)m
vCPU_percent: (int 0 - 100)
image: (string)
volume: (string)
connection: (int)
script: (string)
```

### _memory_

Maximum amount of memory to be used by the server Docker container.

### _vCPU_percentage_

Percentage of processor power dedicated to the server. For more details, see the vCPU section in the documentation.

### _image_

Image to be used for the server Docker container. Use the standard image provided as an example or modify it to create a custom server.

### _connection_

Specifies which switch you want to connect the server to. The value is a number from 1 to N that represents the ID of the switch. This option is used to create more complex network topologies.

### _script_

Address of the server execution file.

## Clients

This option is dedicated to defining one or more types of clients to be instantiated during the experiment.

The client structure includes a list with the types of clients:

```yml
clients:
  - amount: (int)
    name: (string)
    memory: (string)m
    vCPU_percent: (int 0 - 100)
    image: (string)
    script:(string)
    connection: (int)
    loss: (float, 0 <= n <= 1)
    delay: (int)ms
    bw: (int)
```

### _amount_

Number of clients of the current type to be instantiated during experiment execution.

### _name_

Client type name. Do not use spaces or special characters. In case of problems during instantiation, check if a forbidden character was used in the name.

### _memory_

Maximum amount of memory to be used by the client Docker container.

### _vCPU_percentage_

Percentage of processor power dedicated to each client instance. For more details, see the vCPU section in the documentation.

### _image_

Image to be used for the client Docker container. Use the standard image provided as an example or modify it to create a custom client.

### _script_

Address of the client execution file.

### _connection_

Specifies which switch you want to connect the current type of client to. The value is a number from 1 to N that represents the ID of the switch. This option is used to create more complex network topologies, for example, one type of client connected to switch 1 and another type connected to switch 2.

### _loss_

Percentage of data loss between the client and the switch it is connected to.

### _delay_

Delay in milliseconds that the connection between the switch and client will have.

### _bw_

Bandwidth between the client and the switch it is connected to. The standard unit is Mbps.